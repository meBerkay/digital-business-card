(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{4163:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(5155),i=a(2115),l=a(5695),d=a(2108),r=a(6874),n=a.n(r);function c(){var e;let{data:s,status:a}=(0,d.useSession)(),r=(0,l.useRouter)(),[c,x]=(0,i.useState)(!0),[m,h]=(0,i.useState)(null),[o,u]=(0,i.useState)([]),[j,v]=(0,i.useState)([]),[f,g]=(0,i.useState)("");return((0,i.useEffect)(()=>{if("loading"!==a){if(!s)return void r.push("/auth/signin?callbackUrl=/admin/dashboard");(async()=>{try{let[e,s,a]=await Promise.all([fetch("/api/admin/stats"),fetch("/api/admin/orders?limit=5"),fetch("/api/admin/users?limit=5")]);if(403===e.status){g("Bu sayfaya erişim yetkiniz yok"),x(!1);return}if(e.ok){let s=await e.json();h(s)}if(s.ok){let e=await s.json();u(e.orders||[])}if(a.ok){let e=await a.json();v(e.users||[])}}catch(e){console.error("Error fetching admin data:",e),g("Veri y\xfcklenirken bir hata oluştu")}finally{x(!1)}})()}},[s,a,r]),"loading"===a||c)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Y\xfckleniyor..."})]})}):s?f?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-600 text-xl mb-4",children:f}),(0,t.jsx)(n(),{href:"/dashboard",className:"text-indigo-600 hover:text-indigo-800",children:"Dashboard'a D\xf6n"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(n(),{href:"/",className:"text-2xl font-bold text-gray-900",children:"DigiKart Admin"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(n(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Kullanıcı Dashboard"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["Merhaba, ",null==(e=s.user)?void 0:e.name]})]})]})})}),(0,t.jsx)("nav",{className:"bg-indigo-600",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex space-x-8",children:[(0,t.jsx)(n(),{href:"/admin/dashboard",className:"text-white border-b-2 border-indigo-300 py-4 px-1 text-sm font-medium",children:"Dashboard"}),(0,t.jsx)(n(),{href:"/admin/users",className:"text-indigo-100 hover:text-white py-4 px-1 text-sm font-medium",children:"Kullanıcılar"}),(0,t.jsx)(n(),{href:"/admin/orders",className:"text-indigo-100 hover:text-white py-4 px-1 text-sm font-medium",children:"Siparişler"}),(0,t.jsx)(n(),{href:"/admin/cards",className:"text-indigo-100 hover:text-white py-4 px-1 text-sm font-medium",children:"Kartvizitler"}),(0,t.jsx)(n(),{href:"/admin/settings",className:"text-indigo-100 hover:text-white py-4 px-1 text-sm font-medium",children:"Ayarlar"})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Sistem genel bakış ve istatistikler"})]}),m&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-indigo-500 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Toplam Kullanıcı"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:m.totalUsers})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4z"})})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Toplam Kartvizit"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:m.totalCards})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Toplam Sipariş"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:m.totalOrders})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 2L3 7v11a1 1 0 001 1h3v-8h6v8h3a1 1 0 001-1V7l-7-5z"})})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Bekleyen Sipariş"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:m.pendingOrders})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.51-1.31c-.562-.649-1.413-1.076-2.353-1.253V5z",clipRule:"evenodd"})]})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Bu Ay Gelir"}),(0,t.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:["₺",m.thisMonthRevenue.toFixed(2)]})]})})]})})}),(0,t.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,t.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Bu Ay Sipariş"}),(0,t.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:m.thisMonthOrders})]})})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Son Siparişler"}),(0,t.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.user.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("tr-TR")})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["₺",e.totalPrice.toFixed(2)]}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"CONFIRMED"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"PENDING"===e.status?"Beklemede":e.status})]})]},e.id))}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n(),{href:"/admin/orders",className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"T\xfcm siparişleri g\xf6r\xfcnt\xfcle →"})})]})}),(0,t.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Yeni Kullanıcılar"}),(0,t.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("tr-TR")})})]},e.id))}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n(),{href:"/admin/users",className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"T\xfcm kullanıcıları g\xf6r\xfcnt\xfcle →"})})]})})]})]})})]}):null}},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"notFound")&&a.d(s,{notFound:function(){return t.notFound}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},7259:(e,s,a)=>{Promise.resolve().then(a.bind(a,4163))}},e=>{var s=s=>e(e.s=s);e.O(0,[874,108,441,684,358],()=>s(7259)),_N_E=e.O()}]);